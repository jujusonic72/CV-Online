<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Julien Poirier Morin - CV</title>
  <style>
    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-toggle {
      background: none;
      border: none;
      color: #ccc;
      margin-left: 0.5rem;
      cursor: pointer;
      font-size: 0.85rem;
    }

    .dropdown-toggle:hover {
      color: white;
    }

    .dropdown-menu {
      display: none;
      position: absolute;
      top: inherit;
      left: 0;
      background-color: #21252b;
      box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
      z-index: 1001;
      min-width: 140px;
      border-radius: 4px;
    }

    .dropdown-menu button {
      background: none;
      border: none;
      color: #ccc;
      padding: 0.5rem 1rem;
      text-align: left;
      width: 100%;
      cursor: pointer;
      border-radius: 4px;
    }

    .dropdown-menu button:hover {
      background-color: #2c313a;
      color: white;
    }

    .dropdown:hover .dropdown-menu {
      display: flex;
      flex-direction: column;
    }

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #21252b;
      color: #ccc;
      height: 32px;
      padding: 0 1rem;
      font-size: 0.85rem;
      font-family: 'Segoe UI', sans-serif;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
    }

    .window-controls {
      display: flex;
      gap: 0.4rem;
    }
    .side-bar .side-bar-section {
      position: relative;
      display: inline-block;
      background-color: none;
      box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
      z-index: 1001;
      min-width: 140px;
    }
    .side-bar-menu {
      display: flex;
      flex-direction: column;
      top: inherit;
      left: 0;
      border-radius: 4px;
      padding-left: 1rem;
    }
    .side-bar-toggle {
      background: none;
      border: none;
      color: #ccc;
      margin-left: 0.5rem;
      cursor: pointer;
      font-size: 1rem;
    }

    .top-bar-title {
      flex-grow: 1;
      text-align: center;
      color: #ccc;
      font-weight: 500;
    }

    .top-bar-menu button {
      background: none;
      border: none;
      color: #ccc;
      cursor: pointer;
      font-size: 0.85rem;
    }

    .top-bar-menu button:hover {
      color: white;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9f7fb;
      color: #333;
      margin: 0;
      padding: 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .main-container {
      display: flex;
      background-color: azure;
    }

    .side-bar {
      width: 220px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      font-family: 'Segoe UI', sans-serif;
      font-size: 0.9rem;
      background-color: #2c313a;
      color: azure;
      padding-left: 1rem;
      padding-top: 1rem;
    }

    .side-bar label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      transition: background-color 0.2s ease-in-out;
      cursor: pointer;
      color: azure;
      margin-right: 0.5rem;
    }

    .side-bar label:hover {
      background-color: #454c5b;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      transition: background-color 0.2s ease-in-out;
      cursor: pointer;

    }


    .container {
      position: relative;
      width: 100vw;
      height: 95vh;
      overflow: hidden;
    }

    .floating-window {
      position: absolute;
      background-color: #fff;
      border: 2px solid #c7d7e0;
      border-radius: 10px;
      box-shadow: 0 4px 10px indigo;
      resize: both;
      overflow: auto;
      resize: both;
      overflow: auto;
      min-height: 100px;
      max-height: 99vh;
      padding-right: 1rem;
    }

    .floating-header {
      cursor: move;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      user-select: none;
      background-color: indigo;
      color: azure;
      position: fixed;
      width: inherit;
      border-radius: 9px 5px 0px 0px;
      box-shadow: 2px 0 0 2px 1px indigo;
      padding: 0.3rem 0rem 0.3rem 1rem;
    }

    .content {
      margin: 1rem;
      padding: 1rem;
    }

    .floating-header .minimize-btn {
      background: none;
      border: none;
      font-size: 1.2em;
      cursor: pointer;
      color: azure;
    }

    .floating-window h2 {
      margin-top: 0;
    }

    .header img {
      width: 100px;
      border-radius: 50%;
    }

    .quote {
      font-style: italic;
      background-color: #f2f6fa;
      padding: 1rem;
      border-left: 5px solid #ff6f91;
    }

    .skill-icons img,
    .social-icons img {
      width: 24px;
      margin-right: 8px;
    }

    .floating-window.dragging {
      user-select: none;
    }

    .floating-window {
      transition: opacity 0.15s ease-in-out;
    }

    .game_cell.has_cover {
      margin: 1rem;
    }
  </style>
</head>

<body>
  <header class="top-bar">
    <div class="top-bar-menu">
      <div class="dropdown">
        <button class="dropdown-toggle">File</button>
        <div class="dropdown-menu">
          <button id="menu-web">Version Web</button>
          <button id="menu-pdf">Version PDF</button>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropdown-toggle">Edit</button>
        <div class="dropdown-menu">
          <button id="menu-hide-all">Hide All</button>
          <button id="menu-show-all">Show All</button>
          <button id="menu-minimize-all">Minimize All</button>
          <button id="menu-extend-all">Extend All</button>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropdown-toggle">Langue</button>
        <div class="dropdown-menu">
          <button id="menu-en">EN</button>
          <button id="menu-fr">FR</button>
        </div>
      </div>
      <button>Help</button>
    </div>
    <div class="top-bar-title">Julien Poirier Morin – CV</div>
  </header>
  <div class="main-container">
    <div id="window-controls" class="side-bar">
      <strong>Window selection:</strong><br>
      <div class="side-bar-section">
        <button class="side-bar-toggle":checkbox>Info perso</button>
        <div class="side-bar-menu" id="info-perso">
          <label><input type="checkbox" class="toggle-window" value="window-experience" checked> Photo</label><br>
          <label><input type="checkbox" class="toggle-window" value="window-contact" checked> Contact</label><br>
          <label><input type="checkbox" class="toggle-window" value="window-experience" checked> Compétences</label>
        </div>
      </div>
      <div class="side-bar-section">
        <button class="side-bar-toggle">Experiences</button>
        <div class="side-bar-menu" id="experiences">
          <label><input type="checkbox" class="toggle-window" value="window-education" checked> Education</label><br>
          <label><input type="checkbox" class="toggle-window" value="window-xp-pro" checked> Expérience
            professionelle</label><br>
        </div>
      </div>
      <div class="side-bar-section">
        <button class="side-bar-toggle">Portfolios</button>
        <div class="side-bar-menu" id="portfolios">
          <label><input type="checkbox" class="toggle-window" value="window-experience" checked> Portfolio
            Son</label><br>
          <label><input type="checkbox" class="toggle-window" value="window-experience" checked> Portfolio
            Jeux</label><br>
        </div>
      </div>
    </div>
    <div class="container">
      <!-- Sample floating windows -->
      <div class="floating-window" id="window-contact" style="top: 20px; left: 20px; width: 300px;">
        <div class="floating-header">
          Contact
          <button class="minimize-btn">−</button>
        </div>
        <div class="content">
          <p><strong>Phone:</strong> +1 438 346-4482</p>
          <p><strong>Email:</strong> jpoiriermorin@gmail.com</p>
          <p><strong>Address:</strong> 7030 Rue Sagard app1, H2E2S5, Montréal, Québec, Canada</p>
        </div>
      </div>

      <div class="floating-window" id="window-education" style="top: 120px; left: 80px; width: 300px;">
        <div class="floating-header">
          Education
          <button class="minimize-btn">−</button>
        </div>
        <div class="content">
          <p><strong>Université:</strong> UQAC</p>
          <p><strong>Baccalauréat:</strong> Développement de Jeux Vidéo</p>
          <p><strong>Graduation:</strong> 2026</p>
        </div>
      </div>

      <div class="floating-window" id="window-experience" style="top: 220px; left: 180px; width: 300px;">
        <div class="floating-header">
          Experience
          <button class="minimize-btn">−</button>
        </div>
        <div class="content">
          <p><strong>Stage:</strong> Programmation Gameplay chez Ubisoft Québec</p>
          <p><strong>Stage travail:</strong> Développeur de Jeux Vidéo AR mobile</p>
        </div>
      </div>
    </div>

  </div>

  <script>
    let zIndexCounter = 1000;

    const saveState = () => {
      const state = Array.from(document.querySelectorAll('.floating-window')).map(el => {
        return {
          id: el.id,
          top: el.style.top,
          left: el.style.left,
          width: el.style.width,
          height: el.style.height,
          minimized: el.classList.contains('minimized')
        };
      });
      localStorage.setItem('floatingWindowsState', JSON.stringify(state));
    };

    const restoreState = () => {
      const saved = localStorage.getItem('floatingWindowsState');
      if (saved) {
        const state = JSON.parse(saved);
        state.forEach(cfg => {
          const el = document.getElementById(cfg.id);
          if (el) {
            el.style.top = cfg.top;
            el.style.left = cfg.left;
            el.style.width = cfg.width;
            el.style.height = cfg.height;
            if (cfg.minimized) {
              el.classList.add('minimized');
              const content = el.querySelector('.content');
              if (content) content.style.display = 'none';
            }
          }
        });
      }
    };

    document.querySelectorAll('.floating-window').forEach(el => {
      if (el.dataset.init) return;
      el.dataset.init = true;

      let isDragging = false, offsetX = 0, offsetY = 0;

      const bringToFront = () => {
        zIndexCounter++;
        el.style.zIndex = zIndexCounter;
      };

      const dragStart = e => {
        if (!e.target.closest('.floating-header')) return;
        isDragging = true;
        offsetX = e.clientX - el.offsetLeft;
        offsetY = e.clientY - el.offsetTop;
        bringToFront();
        el.classList.add('dragging');
      };

      const dragMove = e => {
        if (!isDragging) return;

        const container = document.querySelector('.container');
        const maxX = container.clientWidth - el.offsetWidth;
        const maxY = container.clientHeight - el.offsetHeight;

        let newLeft = e.clientX - offsetX;
        let newTop = e.clientY - offsetY;

        newLeft = Math.max(0, Math.min(newLeft, maxX));
        newTop = Math.max(0, Math.min(newTop, maxY));

        el.style.left = newLeft + 'px';
        el.style.top = newTop + 'px';
      };

      const dragEnd = () => {
        if (isDragging) {
          isDragging = false;
          el.classList.remove('dragging');
          saveState();
        }
      };

      el.querySelector('.floating-header')?.addEventListener('mousedown', dragStart);
      document.addEventListener('mousemove', dragMove);
      document.addEventListener('mouseup', dragEnd);

      const minimizeBtn = el.querySelector('.minimize-btn');
      const content = el.querySelector('.content');
      if (minimizeBtn && content) {
        minimizeBtn.addEventListener('click', () => {
          const isHidden = content.style.display === 'none';
          el.style.height = isHidden ? 'fit-content' : 'fit-content';
          content.style.display = isHidden ? 'block' : 'none';
          minimizeBtn.textContent = isHidden ? '−' : '+';
          el.classList.toggle('minimized', !isHidden);
          saveState();
        });
      }

      const resizeObserver = new ResizeObserver(() => {
        isDragging = false;
        saveState();
      });
      resizeObserver.observe(el);

      window.addEventListener('resize', () => {
        const container = document.querySelector('.container');
        const maxX = container.clientWidth - el.offsetWidth;
        const maxY = container.clientHeight - el.offsetHeight;

        let currentLeft = parseInt(el.style.left, 10);
        let currentTop = parseInt(el.style.top, 10);

        if (currentLeft > maxX) el.style.left = Math.max(0, maxX) + 'px';
        if (currentTop > maxY) el.style.top = Math.max(0, maxY) + 'px';
      });
    });

    restoreState();

    // Re-bind toggle controls dynamically (for dynamically added windows)
    const updateCheckboxBindings = () => {
      const checkboxes = document.querySelectorAll('.toggle-window');
      checkboxes.forEach(cb => {
        cb.removeEventListener('change', cb._listener);
        cb._listener = () => {
          const target = document.getElementById(cb.value);
          if (target) {
            if (cb.checked) {
              target.style.opacity = 0;
              target.style.display = 'block';
              setTimeout(() => target.style.opacity = 1, 150);
            } else {
              target.style.opacity = 1;
              setTimeout(() => target.style.opacity = 0, 0);
              setTimeout(() => target.style.display = 'none', 150);
            }
          }
          const visibleState = {};
          document.querySelectorAll('.toggle-window').forEach(box => {
            visibleState[box.value] = box.checked;
          });
          localStorage.setItem('visibleWindowStates', JSON.stringify(visibleState));
        };
        cb.addEventListener('change', cb._listener);
      });
    };

    updateCheckboxBindings();

    const savedWindowStates = JSON.parse(localStorage.getItem('visibleWindowStates') || '{}');
    document.querySelectorAll('.toggle-window').forEach(cb => {
      if (savedWindowStates.hasOwnProperty(cb.value)) {
        cb.checked = savedWindowStates[cb.value];
        const target = document.getElementById(cb.value);
        if (target) {
          target.style.display = cb.checked ? 'block' : 'none';
        }
      }
    });

    // Add show all / hide all functionality
    const controlsDiv = document.getElementById('window-controls');
    const btnShowAll = document.createElement('button');
    const btnHideAll = document.createElement('button');
    btnShowAll.textContent = 'Show All';
    btnHideAll.textContent = 'Hide All';
    btnShowAll.style.marginTop = '10px';
    btnHideAll.style.marginLeft = '5px';
    btnHideAll.style.marginTop = '10px';


    btnShowAll.addEventListener('click', () => {
      document.querySelectorAll('.toggle-window').forEach(cb => {
        cb.checked = true;
        cb.dispatchEvent(new Event('change'));
      });
    });

    btnHideAll.addEventListener('click', () => {
      document.querySelectorAll('.toggle-window').forEach(cb => {
        cb.checked = false;
        cb.dispatchEvent(new Event('change'));
      });
    });
    // Handle window checkboxes
    const checkboxes = document.querySelectorAll('.toggle-window');
    checkboxes.forEach(cb => {
      cb.addEventListener('change', () => {
        const target = document.getElementById(cb.value);
        if (target) {
          target.style.display = cb.checked ? 'block' : 'none';
        }
        // Save visibility state
        const visibleState = {};
        checkboxes.forEach(box => {
          visibleState[box.value] = box.checked;
        });
        localStorage.setItem('visibleWindowStates', JSON.stringify(visibleState));
      });
    });


    document.getElementById('menu-hide-all')?.addEventListener('click', () => {
      document.querySelectorAll('.toggle-window').forEach(cb => {
        cb.checked = false;
        cb.dispatchEvent(new Event('change'));
      });
    });

    document.getElementById('menu-show-all')?.addEventListener('click', () => {
      document.querySelectorAll('.toggle-window').forEach(cb => {
        cb.checked = true;
        cb.dispatchEvent(new Event('change'));
      });
    });

    document.getElementById('menu-minimize-all')?.addEventListener('click', () => {
      document.querySelectorAll('.floating-window').forEach(el => {
        const content = el.querySelector('.content');
        const btn = el.querySelector('.minimize-btn');
        if (content && btn && content.style.display !== 'none') {
          content.style.display = 'none';
          btn.textContent = '+';
          el.classList.add('minimized');
        }
      });
      saveState();
    });

    document.getElementById('menu-extend-all')?.addEventListener('click', () => {
      document.querySelectorAll('.floating-window').forEach(el => {
        const content = el.querySelector('.content');
        const btn = el.querySelector('.minimize-btn');
        if (content && btn && content.style.display === 'none') {
          content.style.display = 'block';
          btn.textContent = '−';
          el.classList.remove('minimized');
        }
      });
      saveState();
    });
  </script>
</body>

</html>